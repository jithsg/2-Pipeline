schema: '2.0'
stages:
  load:
    cmd: python src/load.py --config=params.yaml
    deps:
    - path: data/iris.csv
      hash: md5
      md5: 717820ef0af287ff346c5cabfb4c612c
      size: 5107
    - path: src/load.py
      hash: md5
      md5: 562ef32640fd9d55ff8d2d70d8418b04
      size: 1085
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.35
          random_state: 42
    outs:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
  feat:
    cmd: python src/feat.py --config=params.yaml
    deps:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
    - path: src/feat.py
      hash: md5
      md5: d423ea0d37f3b92f0d7c681ffc8fec87
      size: 1038
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.35
          random_state: 42
    outs:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
  split:
    cmd: python src/split.py --config=params.yaml
    deps:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
    - path: src/split.py
      hash: md5
      md5: 031f4eb46b5c0fec29eb66a7934a5410
      size: 1007
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.35
          random_state: 42
    outs:
    - path: data/test_iris.csv
      hash: md5
      md5: 69fea0764b7fbedd99ffc8db31917d18
      size: 2480
    - path: data/train_iris.csv
      hash: md5
      md5: a369623f66138583a315f4dd25f6b464
      size: 4723
  train:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: data/train_iris.csv
      hash: md5
      md5: a369623f66138583a315f4dd25f6b464
      size: 4723
    - path: src/train.py
      hash: md5
      md5: 29bfab53b7eb8c6cc2eb0dca4c32697b
      size: 1317
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.35
          random_state: 42
        training:
          clf_params:
            C: 0.001
            solver: lbfgs
            multi_class: multinomial
            max_iter: 100
          model_path: model/model.pkl
    outs:
    - path: model/model.pkl
      hash: md5
      md5: 794d96cac730905507fafcb24e1735f5
      size: 991
  eval:
    cmd: python src/eval.py --config=params.yaml
    deps:
    - path: data/test_iris.csv
      hash: md5
      md5: 69fea0764b7fbedd99ffc8db31917d18
      size: 2480
    - path: model/model.pkl
      hash: md5
      md5: 794d96cac730905507fafcb24e1735f5
      size: 991
    - path: src/eval.py
      hash: md5
      md5: 9ecb66791dd66f8a5a702b16305eed39
      size: 2183
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.35
          random_state: 42
        reports:
          metrics_file: eval/metrics.json
          confusion_matrix_file: eval/confusion_matrix.png
          confusion_matrix_csv_file: eval/confusion_matrix_data.csv
    outs:
    - path: eval/confusion_matrix.png
      hash: md5
      md5: 40ddbd3abd7f210b576dd16c27c6d4d2
      size: 15825
    - path: eval/confusion_matrix_data.csv
      hash: md5
      md5: a86fcca1350c8204ffa92e1059a6cb38
      size: 281
    - path: eval/metrics.json
      hash: md5
      md5: b535a16955733364665f3418ef007dbf
      size: 139
