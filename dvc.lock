schema: '2.0'
stages:
  load:
    cmd: python src/load.py --config=params.yaml
    deps:
    - path: data/iris.csv
      hash: md5
      md5: 717820ef0af287ff346c5cabfb4c612c
      size: 5107
    - path: src/load.py
      hash: md5
      md5: 562ef32640fd9d55ff8d2d70d8418b04
      size: 1085
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.25
          random_state: 42
    outs:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
  feat:
    cmd: python src/feat.py --config=params.yaml
    deps:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
    - path: src/feat.py
      hash: md5
      md5: d423ea0d37f3b92f0d7c681ffc8fec87
      size: 1038
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.25
          random_state: 42
    outs:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
  split:
    cmd: python src/split.py --config=params.yaml
    deps:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
    - path: src/split.py
      hash: md5
      md5: 031f4eb46b5c0fec29eb66a7934a5410
      size: 1007
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.25
          random_state: 42
    outs:
    - path: data/test_iris.csv
      hash: md5
      md5: 8c5b1312048ca4d2b0546483a9a57cf2
      size: 1806
    - path: data/train_iris.csv
      hash: md5
      md5: 02bd584f715e68aa1ea54f41a7d40b2e
      size: 5397
  train:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: data/train_iris.csv
      hash: md5
      md5: 02bd584f715e68aa1ea54f41a7d40b2e
      size: 5397
    - path: src/train.py
      hash: md5
      md5: 29bfab53b7eb8c6cc2eb0dca4c32697b
      size: 1317
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.25
          random_state: 42
        training:
          clf_params:
            C: 0.001
            solver: lbfgs
            multi_class: multinomial
            max_iter: 50
          model_path: model/model.pkl
    outs:
    - path: model/model.pkl
      hash: md5
      md5: 0b71fa20c5bef962454d08aaf2a23fd0
      size: 991
  eval:
    cmd: python src/eval.py --config=params.yaml
    deps:
    - path: data/test_iris.csv
      hash: md5
      md5: 8c5b1312048ca4d2b0546483a9a57cf2
      size: 1806
    - path: model/model.pkl
      hash: md5
      md5: 0b71fa20c5bef962454d08aaf2a23fd0
      size: 991
    - path: src/eval.py
      hash: md5
      md5: e93f7052fb137160f6aa264499f0f461
      size: 1527
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.25
          random_state: 42
        reports:
          metrics_file: eval/metrics.json
          confusion_matrix_file: eval/confusion_matrix.png
    outs:
    - path: eval/confusion_matrix.png
      hash: md5
      md5: ffb313f1d050840d1c88c8de0adea9bd
      size: 13692
    - path: eval/metrics.json
      hash: md5
      md5: 9315d5f357bcd9671056f53984c021a1
      size: 32
